<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - FeiertagsAPI</title>
  <link rel="stylesheet" href="./assets/css/styles.css">
</head>
<body>
  <header>
    <div class="header-inner">
      <a href="/" class="logo">
        <div class="logo-icon">üìÖ</div>
        <span>FeiertagsAPI</span>
      </a>
      <nav>
        <a href="/#features">Features</a>
        <a href="./docs.html">Docs</a>
        <a href="/#pricing">Pricing</a>
        <a href="./dashboard.html">Dashboard</a>
      </nav>
    </div>
  </header>

  <main style="padding: 4rem 0;">
    <div class="container">
      <div class="section-header">
        <h1>Dashboard</h1>
        <p>Verwalte deinen API-Key und √ºberwache deine Nutzung.</p>
      </div>

      <!-- API Key Section -->
      <div class="endpoint-card">
        <h2>üîë Dein API-Key</h2>
        <p>Nutze diesen Key im <code>X-API-Key</code> Header f√ºr alle API-Requests.</p>

        <div style="margin: 1.5rem 0; padding: 1rem; background: var(--color-bg-alt); border-radius: var(--radius); display: flex; gap: 1rem; align-items: center;">
          <input
            type="text"
            id="apiKey"
            value="demo-key-123456789"
            readonly
            style="flex: 1; padding: 0.75rem; border: 1px solid var(--color-border); border-radius: var(--radius); font-family: var(--font-mono); font-size: 0.875rem;"
          >
          <button
            onclick="copyApiKey()"
            class="btn btn-primary"
            style="white-space: nowrap;"
          >
            üìã Kopieren
          </button>
        </div>

        <p style="font-size: 0.875rem; color: var(--color-text-muted);">
          ‚ö†Ô∏è Teile deinen API-Key niemals √∂ffentlich. Speichere ihn sicher in Umgebungsvariablen.
        </p>
      </div>

      <!-- Current Plan -->
      <div class="endpoint-card">
        <h2>üìä Aktueller Plan</h2>
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h3 style="margin: 0; font-size: 1.5rem;">Free Plan</h3>
            <p style="margin: 0.5rem 0 0; color: var(--color-text-muted);">100 Requests/Monat</p>
          </div>
          <a href="/#pricing" class="btn btn-primary">Upgrade zu Pro</a>
        </div>
      </div>

      <!-- Usage Stats -->
      <div class="endpoint-card">
        <h2>üìà Nutzungs-Statistik</h2>

        <div style="margin: 2rem 0;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span>Requests diesen Monat</span>
            <span><strong>42 / 100</strong></span>
          </div>
          <div style="background: var(--color-bg-alt); height: 12px; border-radius: 999px; overflow: hidden;">
            <div style="background: var(--color-primary); height: 100%; width: 42%; transition: width 0.3s;"></div>
          </div>
          <p style="margin-top: 0.5rem; font-size: 0.875rem; color: var(--color-text-muted);">
            58 Requests verbleibend
          </p>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
          <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-alt); border-radius: var(--radius);">
            <div style="font-size: 2rem; font-weight: 700; color: var(--color-primary);">42</div>
            <div style="color: var(--color-text-muted); margin-top: 0.25rem;">Total Requests</div>
          </div>

          <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-alt); border-radius: var(--radius);">
            <div style="font-size: 2rem; font-weight: 700; color: var(--color-success);">98.2%</div>
            <div style="color: var(--color-text-muted); margin-top: 0.25rem;">Success Rate</div>
          </div>

          <div style="text-align: center; padding: 1.5rem; background: var(--color-bg-alt); border-radius: var(--radius);">
            <div style="font-size: 2rem; font-weight: 700; color: var(--color-secondary);">47ms</div>
            <div style="color: var(--color-text-muted); margin-top: 0.25rem;">Avg. Response</div>
          </div>
        </div>
      </div>

      <!-- Recent Requests -->
      <div class="endpoint-card">
        <h2>üïê Letzte Requests</h2>

        <table class="param-table">
          <thead>
            <tr>
              <th>Zeitstempel</th>
              <th>Endpoint</th>
              <th>Status</th>
              <th>Response Time</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>14.01.2025 10:23</td>
              <td><code>/api/holidays</code></td>
              <td><span style="color: var(--color-success);">‚úì 200</span></td>
              <td>42ms</td>
            </tr>
            <tr>
              <td>14.01.2025 10:18</td>
              <td><code>/api/businessdays</code></td>
              <td><span style="color: var(--color-success);">‚úì 200</span></td>
              <td>58ms</td>
            </tr>
            <tr>
              <td>14.01.2025 09:45</td>
              <td><code>/api/next-holiday</code></td>
              <td><span style="color: var(--color-success);">‚úì 200</span></td>
              <td>39ms</td>
            </tr>
            <tr>
              <td>13.01.2025 16:32</td>
              <td><code>/api/holidays</code></td>
              <td><span style="color: var(--color-error);">‚úó 400</span></td>
              <td>12ms</td>
            </tr>
            <tr>
              <td>13.01.2025 14:21</td>
              <td><code>/api/is-holiday</code></td>
              <td><span style="color: var(--color-success);">‚úì 200</span></td>
              <td>35ms</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Quick Start -->
      <div class="endpoint-card">
        <h2>üöÄ Quick Start</h2>
        <p>Teste die API direkt hier im Browser:</p>

        <div class="code-example">
          <pre><code id="quickStartCode">fetch('https://feiertage-api.vercel.app/api/holidays?country=de&year=2025', {
  headers: { 'X-API-Key': 'demo-key-123456789' }
})
  .then(res => res.json())
  .then(data => console.log(data));</code></pre>
        </div>

        <button onclick="testAPI()" class="btn btn-primary" style="margin-top: 1rem;">
          ‚ñ∂Ô∏è API testen
        </button>

        <div id="testResult" style="margin-top: 1rem; display: none;">
          <h3>Ergebnis:</h3>
          <div class="code-example">
            <pre><code id="testResultCode"></code></pre>
          </div>
        </div>
      </div>

      <!-- Payment Section (for Pro/Business) -->
      <div class="endpoint-card" id="upgradeSection">
        <h2>üíé Upgrade zu Pro oder Business</h2>
        <p>Erhalte mehr Requests, Priority Support und erweiterte Features.</p>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
          <div style="border: 2px solid var(--color-border); border-radius: var(--radius); padding: 1.5rem;">
            <h3>Pro</h3>
            <div style="font-size: 2rem; font-weight: 700; color: var(--color-primary); margin: 1rem 0;">
              ‚Ç¨9<span style="font-size: 1rem; color: var(--color-text-muted);">/Monat</span>
            </div>
            <ul style="list-style: none; padding: 0; margin: 1rem 0;">
              <li style="padding: 0.25rem 0;">‚úì 10.000 Requests/Monat</li>
              <li style="padding: 0.25rem 0;">‚úì Priority Support</li>
              <li style="padding: 0.25rem 0;">‚úì 99,9% SLA</li>
            </ul>
            <button onclick="upgradePlan('pro')" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
              Pro w√§hlen
            </button>
          </div>

          <div style="border: 2px solid var(--color-primary); border-radius: var(--radius); padding: 1.5rem;">
            <span style="display: inline-block; background: var(--color-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem;">BELIEBT</span>
            <h3>Business</h3>
            <div style="font-size: 2rem; font-weight: 700; color: var(--color-primary); margin: 1rem 0;">
              ‚Ç¨29<span style="font-size: 1rem; color: var(--color-text-muted);">/Monat</span>
            </div>
            <ul style="list-style: none; padding: 0; margin: 1rem 0;">
              <li style="padding: 0.25rem 0;">‚úì 100.000 Requests/Monat</li>
              <li style="padding: 0.25rem 0;">‚úì Premium Support (24h)</li>
              <li style="padding: 0.25rem 0;">‚úì 99,95% SLA</li>
              <li style="padding: 0.25rem 0;">‚úì Advanced Analytics</li>
            </ul>
            <button onclick="upgradePlan('business')" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
              Business w√§hlen
            </button>
          </div>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="endpoint-card">
        <h2>‚öôÔ∏è Account Einstellungen</h2>

        <div style="display: grid; gap: 1rem; margin-top: 1.5rem;">
          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Email</label>
            <input
              type="email"
              value="demo@example.com"
              readonly
              style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-border); border-radius: var(--radius);"
            >
          </div>

          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Plan</label>
            <input
              type="text"
              value="Free (100 Requests/Monat)"
              readonly
              style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-border); border-radius: var(--radius);"
            >
          </div>
        </div>

        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--color-border);">
          <h3 style="color: var(--color-error); margin-bottom: 1rem;">Danger Zone</h3>
          <button class="btn btn-secondary" onclick="alert('Demo-Modus: Account kann nicht gel√∂scht werden.')">
            Account l√∂schen
          </button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-inner">
      <div class="footer-links">
        <a href="/">Home</a>
        <a href="./docs.html">Dokumentation</a>
        <a href="/#pricing">Pricing</a>
      </div>
      <div class="footer-meta">
        ¬© 2025 FeiertagsAPI
      </div>
    </div>
  </footer>

  <script>
    function copyApiKey() {
      const apiKey = document.getElementById('apiKey');
      apiKey.select();
      document.execCommand('copy');
      alert('API-Key kopiert! üìã');
    }

    async function testAPI() {
      const resultDiv = document.getElementById('testResult');
      const resultCode = document.getElementById('testResultCode');

      resultDiv.style.display = 'block';
      resultCode.textContent = 'Loading...';

      try {
        const response = await fetch('https://feiertage-api.vercel.app/api/holidays?country=de&year=2025', {
          headers: { 'X-API-Key': 'demo-key-123456789' }
        });
        const data = await response.json();
        resultCode.textContent = JSON.stringify(data, null, 2);
      } catch (error) {
        resultCode.textContent = `Error: ${error.message}`;
      }
    }

    function upgradePlan(plan) {
      // In production: Redirect to Stripe Checkout
      alert(`Upgrade zu ${plan.toUpperCase()} wird ausgef√ºhrt...\n\nIn der Live-Version √∂ffnet sich hier Stripe Checkout.`);

      // Example Stripe Checkout integration:
      // window.location.href = `/api/create-checkout-session?plan=${plan}`;
    }

    // Check for plan parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    const plan = urlParams.get('plan');
    if (plan) {
      document.getElementById('upgradeSection').scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
